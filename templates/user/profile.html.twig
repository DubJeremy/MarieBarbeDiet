{% extends 'base.html.twig' %}

{% block title %}Page de Profil{% endblock %}

{% block body %}
    <section id= "profile">
        <div id="infouser">
            <img src="{{asset('images/media/' ~ app.user.profilePicture)}}" alt="Photo de profil">
            <h3>{{ app.user.firstname }}.</h3>
            <p>
                <a class="draw-border" href="{{path('app_edit',{'id': app.user.id})}}">Modifier profil</a>
    
                <form action="{{path('app_security_delete',{'id': app.user.id})}}" method="POST">
                    <input type="hidden" name="_method" value="DELETE">
                    <input type="hidden" name="csrf_token" value="{{csrf_token('user_delete_' ~ app.user.id)}}"> 
                    <button class="draw-border" >
                        Supprimer  profil  
                    </button>
                </form>
            </p>
        </div>

        {% for recipe in recipes %}
            <div class="recipe">
                {% if recipe.title != null %}
                    <div>
                        <h3>{{recipe.title}}</h3>
                        {% if recipe.picture != null %}
                            <img src="{{asset('images/media/' ~ recipe.picture)}}" alt="photo du plat">
                        {% endif %}
                        <div>
                            <p>{{recipe.ingredient|nl2br}}</p>
                            <div>
                                <p>{{recipe.difficulty}}</p>
                                <p>temps  {{recipe.preparationTime|date("h:m")}}</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3>Pr√©paration</h3>
                        <p>{{recipe.recipe|nl2br }}</p>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </section>
{% endblock %}